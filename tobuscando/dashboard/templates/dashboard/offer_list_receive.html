{% extends 'dashboard/base_dashboard.html' %}
{% load i18n %}

{% load pagination_tags %}
{% load cloudinary %}
{% load core_tags %}

{% block dashboard_content %}
<h2>Ofertas Recebidas</h2>
<br><br>

{% autopaginate offers_receive 10 %}
{% for offer in offers_receive %}
<div class="item clearfix">
    <div class="col-sm-1">
        {% cloudinary offer.ad.image class='img-responsive' width=50 height=50 %}
    </div>
    <div class="col-sm-8">
        <div class="clearfix ad-title">{{ offer.ad.title }} <a href="{{ offer.ad.get_absolute_url }}" target="_blank" class="small"><i class="fa fa-link"></i></a> </div>
        <div class="cleafix">
            <ul class="list-unstyle list-inline">
                <li><a href="{% url 'dashboard:offer_response' pk=offer.pk %}"><i class="fa fa-edit"></i> Responder</a></li>
                {% if offer.is_active %}
                <li><strong>Status:</strong> <span class="fa fa-check-circle"></span></li>
                {% else %}
                <li><strong>Status:</strong> <span class="fa fa-close"></span></li>
                {% endif %}
                <div class="clearfix col-sm-12">
                    <dl>
                        <dt><strong>Usuário</strong></dt>
                        <dd>{{ offer.person.username }}</dd>
                        <dt>Mensagem</dt>
                        <dd>{{ offer.message|truncatewords:100|safe }}</dd>
                        <dt><strong>Valor da oferta</strong></dt>
                        <dd class="label label-success">{{ offer.price|brl }}</dd>
                    </dl>
                </div>
            </ul>
        </div>
    </div>
</div>
{% empty %}
<div class="alert alert-info">Você ainda não recebeu ofertas. Aguarde.</div>
{% endfor %}

{% paginate %}
{% endblock dashboard_content %}
